"use strict";angular.module("ElidomTemplate",["ionic","ngCordova","ngResource"]).run(["$ionicPlatform",function(e){e.ready(function(){})}]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(e,t,n){t.state("app",{url:"/app","abstract":!0,templateUrl:"templates/main.html",controller:"MainController"}).state("app.home",{url:"/home",cache:!0,views:{viewContent:{templateUrl:"templates/views/home.html",controller:"HomeController"}}}).state("app.settings",{url:"/settings",cache:!0,views:{viewContent:{templateUrl:"templates/views/settings.html",controller:"SettingsController"}}}),n.otherwise("/app/home")}]),angular.module("ElidomTemplate").constant("API_ENDPOINT",{host:"http://192.168.35.227",port:8080,path:"/elidom",needsAuth:!1}),function(e){var t=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};e.module("pickadate.utils",[]).factory("pickadateUtils",["dateFilter",function(e){return{isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},stringToDate:function(e){if(this.isDate(e))return new Date(e);var t=e.split("-"),n=t[0],a=t[1],o=t[2];return new Date(n,a-1,o,3)},dateRange:function(t,n,a,o){var i,r,s,l=[];for(o||(o="yyyy-MM-dd"),r=s=t;n>=t?n>s:s>n;r=n>=t?++s:--s)i=this.stringToDate(a),i.setDate(i.getDate()+r),l.push(e(i,o));return l}}}]),e.module("pickadate",["pickadate.utils"]).directive("pickadate",["$locale","pickadateUtils","dateFilter",function(e,n,a){return{require:"ngModel",scope:{date:"=ngModel",minDate:"=",maxDate:"=",disabledDates:"="},template:'<div class="pickadate"><div class="pickadate-header"><div class="pickadate-controls"><a href="" class="pickadate-prev" ng-click="changeMonth(-1)" ng-show="allowPrevMonth">prev</a><a href="" class="pickadate-next" ng-click="changeMonth(1)" ng-show="allowNextMonth">next</a></div><h3 class="pickadate-centered-heading">{{currentDate | date:"MMMM yyyy"}}</h3></div><div class="pickadate-body"><div class="pickadate-main"><ul class="pickadate-cell"><li class="pickadate-head" ng-repeat="dayName in dayNames">{{dayName}}</li></ul><ul class="pickadate-cell"><li ng-repeat="d in dates" ng-click="setDate(d)" class="{{d.className}}" ng-class="{\'pickadate-active\': date == d.date}">{{d.date | date:"d"}}</li></ul></div></div></div>',link:function(o,i,r,s){function l(e){return/pickadate-disabled/.test(e.className)}var c=o.minDate&&n.stringToDate(o.minDate),d=o.maxDate&&n.stringToDate(o.maxDate),u=o.disabledDates||[],p=new Date;o.dayNames=e.DATETIME_FORMATS.SHORTDAY,o.currentDate=p,o.render=function(e){e=new Date(e.getFullYear(),e.getMonth(),1,3);var i=e.getMonth()+1,r=new Date(e.getFullYear(),e.getMonth()+1,0,3).getDate(),s=n.dateRange(-e.getDay(),0,e),l=n.dateRange(0,r,e),p=n.stringToDate(l[l.length-1]),m=n.dateRange(1,7-p.getDay(),p),h=s.concat(l,m),g=[],f=a(new Date,"yyyy-MM-dd");h.length/7<6&&(h=h.concat(n.dateRange(1,8,h[h.length-1])));var v=new Date(e);v.setMonth(i),o.allowPrevMonth=!c||e>c,o.allowNextMonth=!d||d>v;for(var T=0;T<h.length;T++){var y="",b=h[T];y=b<o.minDate||b>o.maxDate||a(b,"M")!==i.toString()?"pickadate-disabled":t.call(u,b)>=0?"pickadate-disabled pickadate-unavailable":"pickadate-enabled",b===f&&(y+=" pickadate-today"),g.push({date:b,className:y})}o.dates=g},o.setDate=function(e){l(e)||s.$setViewValue(e.date)},s.$render=function(){(date=s.$modelValue)&&-1===t.call(u,date)?o.currentDate=p=n.stringToDate(date):date&&o.setDate({}),o.render(p)},o.changeMonth=function(e){p.setDate(1),p.setMonth(p.getMonth()+e),o.render(p)}}}}])}(window.angular),angular.module("ElidomTemplate").directive("datePicker",["$ionicModal",function(e){return{restrict:"E",scope:{dateModel:"="},controller:["$scope",function(t){e.fromTemplateUrl("templates/directive/datemodal.html",function(e){t.datemodal=e},{scope:t,animation:"slide-in-up"}),t.opendateModal=function(){t.datemodal.show()},t.closedateModal=function(e){t.datemodal.hide(),t.datepicker=e}}],templateUrl:"templates/directive/date-picker.html"}}]),angular.module("ElidomTemplate").controller("HomeController",["$scope","$cordovaDatePicker","ExampleService","ApiService",function(e,t,n,a){e.myHTML=null,e.from_date={},e.to_date={};var o={date:new Date,mode:"date",minDate:new Date,allowOldDates:!0,allowFutureDates:!1,doneButtonLabel:"Done",doneButtonColor:"#000000",cancelButtonLabel:"Abort",cancelButtonColor:"#000000"};e.showDatePicker1=function(){t.show(o).then(function(e){alert(e)})},e.fetchRandomText=function(){n.doAsync().then(n.fetchSomethingFromServer).then(function(t){e.myHTML=t.data.text,e.$broadcast("scroll.refreshComplete")},function(t){e.myHTML=t,e.$broadcast("scroll.refreshComplete")})},e.fetchGetTest=function(){var e={params:"hi"};a.get("/dnb/service/user/register.json",e,function(e){console.log(e)})},e.fetchPostTest=function(){var t={userId:"lyonghwan",userNm:"lyonghwan"},n=a.update("/dnb/service/user/register.json",null,t);n.$promise.then(function(t){console.log(t),e.myHTML=t.userNm},function(e){console.log(e)})},e.fetchPutTest=function(){var t={userId:"lyonghwan",userNm:"lyonghwan"},n=a.create("/dnb/service/user/register.json",null,t);n.$promise.then(function(t){console.log(t),e.myHTML=t.userNm},function(e){console.log(e)})},e.fetchRandomText()}]),angular.module("ElidomTemplate").controller("MainController",["$scope",function(e){}]),angular.module("ElidomTemplate").controller("SettingsController",["$scope",function(e){}]),angular.module("ElidomTemplate").factory("ApiService",["$window","$http","$ionicPopup","$resource","API_ENDPOINT",function(e,t,n,a,o){var i=o,r=i.port?i.host+":"+i.port+i.path:i.host+i.path;return i.needsAuth&&(t.defaults.headers.common.Authorization="Basic "+e.btoa(i.username+":"+i.password)),{getEndpoint:function(){return r},isSignedIn:function(e){var t=this;if("undefined"==typeof login)e({status:401});else{var n=a(t.getEndpoint()+"/users/"+login.id+".json",{});n.get(null,function(t,n){e(t,n)},function(t){e(null,t)})}},handleError:function(e){e&&e.status&&401==e.status?this.goToSingin():this.showErrorMessage(e)},showErrorMessage:function(e){0==status?n.alert({title:"Error",template:"서버이상이 발생되었습니다. 서버상태를 확인 해주세요."}):n.alert({title:"Error",template:"Status : "+e.status+", "+e.statusText})},search:function(e,t,n){var o=this;t&&(t.page=t.page?t.page:1,t.start=t.start?t.start:0,t.limit=t.limit?t.limit:20);var i=a(o.getEndpoint()+e,t);i.get(function(e,a){e.start=t.start,e.limit=t.limit,e.page=Math.ceil(e.start/e.limit)+1,e.total_page=e.total>t.limit?Math.ceil(e.total/t.limit):1,n(e)},function(e){o.handleError(e)})},list:function(e,t,n){var o=this,i=a(o.getEndpoint()+e,t);i.get(function(e,t){n(e.items)},function(e){o.handleError(e)})},get:function(e,t,n,o){var i=this,r=a(i.getEndpoint()+e,t);r.get(function(e,t){n(e)},function(e){o?o(e):i.handleError(e)})},checkUnique:function(e,t,n,a,o){var i=this;i.get(i.getEndpoint()+e,t,function(e,t){a(e)},function(e){404==e.status?n(e):o(e)})},getByName:function(e,t,n){var o=this,i=a(o.getEndpoint()+e,t);i.get(function(e,t){n(e)},function(e){o.handleError(e)})},create:function(e,t,n){var o=this,i=a(o.getEndpoint()+e,t,{create:{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(e,t){return t=angular.extend({},t,{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}),angular.toJson(n)}}});return i.create()},update:function(e,t,n){var o=this,i=a(o.getEndpoint()+e,t,{update:{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(e,t){return t=angular.extend({},t,{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}),angular.toJson(n)}}});return i.update()},updateMultiple:function(e,t,n){var o=this,i=a(o.getEndpoint()+e,t,{updateMultiple:{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"},transformRequest:function(e,t){return t=angular.extend({},t,{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}),angular.toJson({multiple_data:n})}}});return i.updateMultiple()},"delete":function(e,t){var n=this,o=a(n.getEndpoint()+e,{},{"delete":{method:"DELETE",headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}}});return o["delete"]()}}}]),angular.module("ElidomTemplate").factory("ExampleService",["$http","$timeout","$q","ApiService",function(e,t,n,a){var o=function(){var e=n.defer(),t="error";return e.resolve(t),console.log(t),e.promise},i=function(){var t={headers:{}};t.headers["Content-Type"]="application/json;charset=UTF-8";var n=a.getEndpoint()+"/dnb/service/user/register.json",o={param:"Hello"},i=e.get(n,o,t).success(function(e,t,n,a){console.log(e)}).error(function(e,t,n,a){console.log(t,a)});return i},r=function(){var t={headers:{"Content-Type":"application/json;charset=UTF-8"}},n=a.getEndpoint()+"/dnb/service/user/register.json",o={userId:"mw1106.kim",userNm:"Kim minwoo"},i=e.post(n,o,t).success(function(e,t,n,a){console.log(e)}).error(function(e,t,n,a){console.log("headers : "+n),console.log("config : "+a),console.log("data: "+e),console.log("status:"+t)});return i},s=function(){var t={headers:{}};t.headers["Content-Type"]="application/json;charset=UTF-8";var n=a.getEndpoint()+"/dnb/service/user/register.json",o={param:"Hello"},i=e.put(n,o,t).success(function(e,t,n,a){console.log(e)}).error(function(e,t,n,a){console.log(t,a)});return i},l=function(){var t=e({url:"http://hipsterjesus.com/api",params:{paras:2},method:"GET"}).success(function(e){console.log("fetched this stuff from server:",e)}).error(function(e){console.log("an error occured",e)});return t};return{doAsync:o,fetchSomethingFromServer:l,fetchGetServer:i,fetchPostServer:r,fetchPutServer:s}}]),angular.module("ElidomTemplate").factory("_",["$window",function(e){return e._}]),angular.module("ElidomTemplate").run(["$templateCache",function(e){e.put("templates/main.html",'<ion-side-menus>\n    <!-- Center content -->\n    <ion-side-menu-content>\n\n        <ion-nav-view name="viewContent">\n\n        </ion-nav-view>\n    </ion-side-menu-content>\n\n    <!-- Left menu -->\n    <ion-side-menu side="left" class="side-menu">\n\n        <ion-header-bar align-title="center" class="bar-positive">\n            <h1 class="title">Side Menu</h1>\n        </ion-header-bar>\n\n        <ion-content class="has-header">\n            <div class="list">\n                <a menu-close class="item item-icon-left" ui-sref-active="active" ui-sref="app.home">\n                    <i class="icon ion-home"></i>\n                    Home\n                </a>\n                <a menu-close class="item item-icon-left" ui-sref-active="active" ui-sref="app.settings">\n                    <i class="icon ion-settings"></i>\n                    Settings\n                </a>\n            </div>\n        </ion-content>\n    </ion-side-menu>\n</ion-side-menus>\n'),e.put("templates/directive/date-picker.html",'<div class="card">\n	<label class="item item-input">\n		<input type="text" placeholder="Pick date" ng-model="datepicker" name="datepicker" ng-click="opendateModal()">\n	</label>\n</div>'),e.put("templates/directive/datemodal.html",'<div class="modal">\n  <header class="bar bar-header bar-assertive">\n    <h1 class="title">CHOOSE DATE</h1>\n  </header>\n  <ion-content has-header="true">\n    <div class="padding" style="margin-top:30px;">\n      <div pickadate ng-model="myDate"></div>\n    </div>\n    <button class="button button-full button-dark" ng-click="closedateModal(myDate)">Save</button>\n  </ion-content>\n</div>'),e.put("templates/views/home.html",'<ion-view>\n    <ion-header-bar align-title="center" class="bar-positive">\n    <button class="button button-icon icon ion-navicon" menu-toggle="left"></button>\n        <h1 class="title">gulpTest</h1>\n    </ion-header-bar>\n\n    <ion-content>\n        <ion-refresher\n            pulling-text="Pull to refresh..."\n            on-refresh="fetchRandomText()">\n        </ion-refresher>\n        <div class="loader" ng-if="!myHTML">\n            <ion-spinner></ion-spinner>\n        </div>\n        <div class="content" ng-bind-html="myHTML">\n        </div>\n        <button ng-click="fetchGetTest()">Call Get API</button>\n        <button ng-click="fetchPostTest()">Call Post API</button>\n        <button ng-click="fetchPutTest()">Call Put API</button>\n        \n        <label type="text" ng-model="user.birthday" ng-click="showDatePicker1()">mm/dd/yyyy</label>\n<!--         <date-picker date-model ="from_date"></date-picker>\n        <div pickadate ng-model="myDate"></div> -->\n    </ion-content>\n\n</ion-view>\n'),e.put("templates/views/settings.html",'<ion-view>\n    <ion-header-bar align-title="center" class="bar-positive">\n    <button class="button button-icon icon ion-navicon" menu-toggle="left"></button>\n        <h1 class="title">Settings</h1>\n    </ion-header-bar>\n\n    <ion-content>\n        <div class="list">\n\n            <!-- connect toggles to controller using ng-model -->\n\n            <ion-toggle>\n                <span class="settings-item__text">\n                    Allow Push Notifications\n                </span>\n            </ion-toggle>\n\n            <ion-toggle>\n                <span class="settings-item__text">\n                    Allow cookies\n                </span>\n            </ion-toggle>\n\n        </div>\n    </ion-content>\n\n</ion-view>\n')}]);